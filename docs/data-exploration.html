<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter2 Data Exploration | Rotterdam</title>
  <meta name="description" content="Chapter2 Data Exploration | Rotterdam" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter2 Data Exploration | Rotterdam" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter2 Data Exploration | Rotterdam" />
  
  
  

<meta name="author" content="JACK TAN, YIMING MIAO" />


<meta name="date" content="2021-03-14" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="survival-analysis.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Motivation</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#some-background-information"><i class="fa fa-check"></i><b>1.1</b> Some Background Information</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-exploration.html"><a href="data-exploration.html"><i class="fa fa-check"></i><b>2</b> Data Exploration</a><ul>
<li class="chapter" data-level="2.1" data-path="data-exploration.html"><a href="data-exploration.html#loading-data"><i class="fa fa-check"></i><b>2.1</b> Loading Data</a></li>
<li class="chapter" data-level="2.2" data-path="data-exploration.html"><a href="data-exploration.html#data-wrangling"><i class="fa fa-check"></i><b>2.2</b> Data Wrangling</a><ul>
<li class="chapter" data-level="2.2.1" data-path="data-exploration.html"><a href="data-exploration.html#ttumornnodemmetastasis"><i class="fa fa-check"></i><b>2.2.1</b> T(Tumor)N(Node)M(Metastasis)</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-exploration.html"><a href="data-exploration.html#treatment"><i class="fa fa-check"></i><b>2.2.2</b> Treatment</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-exploration.html"><a href="data-exploration.html#data-visualizations-and-exploration"><i class="fa fa-check"></i><b>2.3</b> Data visualizations and exploration</a><ul>
<li class="chapter" data-level="2.3.1" data-path="data-exploration.html"><a href="data-exploration.html#diagnostics-vs.-survival-times"><i class="fa fa-check"></i><b>2.3.1</b> Diagnostics vs. Survival Times</a></li>
<li class="chapter" data-level="2.3.2" data-path="data-exploration.html"><a href="data-exploration.html#treatment-vs.-survival-times"><i class="fa fa-check"></i><b>2.3.2</b> Treatment vs. Survival Times</a></li>
<li class="chapter" data-level="2.3.3" data-path="data-exploration.html"><a href="data-exploration.html#age-treatment-vs.-survival-times"><i class="fa fa-check"></i><b>2.3.3</b> <code>age</code> + <code>Treatment</code> vs. Survival Times</a></li>
<li class="chapter" data-level="2.3.4" data-path="data-exploration.html"><a href="data-exploration.html#treatment-vs.-tnm"><i class="fa fa-check"></i><b>2.3.4</b> <code>Treatment</code> vs. TNM</a></li>
<li class="chapter" data-level="2.3.5" data-path="data-exploration.html"><a href="data-exploration.html#general-x-year-survival-rate"><i class="fa fa-check"></i><b>2.3.5</b> General X-year Survival Rate</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="survival-analysis.html"><a href="survival-analysis.html"><i class="fa fa-check"></i><b>3</b> Survival Analysis</a><ul>
<li class="chapter" data-level="3.1" data-path="survival-analysis.html"><a href="survival-analysis.html#notation"><i class="fa fa-check"></i><b>3.1</b> Notation</a></li>
<li class="chapter" data-level="3.2" data-path="survival-analysis.html"><a href="survival-analysis.html#kaplan-miere-estimator-of-the-entire-dataset"><i class="fa fa-check"></i><b>3.2</b> Kaplan-Miere estimator of the entire dataset</a></li>
<li class="chapter" data-level="3.3" data-path="survival-analysis.html"><a href="survival-analysis.html#kaplan-miere-estimator-on-different-variables-in-rotterdam"><i class="fa fa-check"></i><b>3.3</b> Kaplan-Miere estimator on different variables in <code>rotterdam</code></a><ul>
<li class="chapter" data-level="3.3.1" data-path="survival-analysis.html"><a href="survival-analysis.html#size-vs.-survival-times"><i class="fa fa-check"></i><b>3.3.1</b> <code>size</code> vs. Survival Times</a></li>
<li class="chapter" data-level="3.3.2" data-path="survival-analysis.html"><a href="survival-analysis.html#nodes_level-vs.-survival-times"><i class="fa fa-check"></i><b>3.3.2</b> <code>Nodes_level</code> vs. Survival Times</a></li>
<li class="chapter" data-level="3.3.3" data-path="survival-analysis.html"><a href="survival-analysis.html#grade-vs.-survival-times"><i class="fa fa-check"></i><b>3.3.3</b> <code>grade</code> vs. Survival Times</a></li>
<li class="chapter" data-level="3.3.4" data-path="survival-analysis.html"><a href="survival-analysis.html#treatment-vs.-survival-times-1"><i class="fa fa-check"></i><b>3.3.4</b> <code>Treatment</code> vs. Survival Times</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="survival-analysis.html"><a href="survival-analysis.html#parametric-models"><i class="fa fa-check"></i><b>3.4</b> Parametric Models</a><ul>
<li class="chapter" data-level="3.4.1" data-path="survival-analysis.html"><a href="survival-analysis.html#user-defined-cox-snell-function"><i class="fa fa-check"></i><b>3.4.1</b> User-defined Cox-Snell function</a></li>
<li class="chapter" data-level="3.4.2" data-path="survival-analysis.html"><a href="survival-analysis.html#exponential-and-weibull"><i class="fa fa-check"></i><b>3.4.2</b> Exponential and Weibull</a></li>
<li class="chapter" data-level="3.4.3" data-path="survival-analysis.html"><a href="survival-analysis.html#log-normal-models"><i class="fa fa-check"></i><b>3.4.3</b> Log-normal models</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="survival-analysis.html"><a href="survival-analysis.html#cox-ph-model"><i class="fa fa-check"></i><b>3.5</b> Cox-PH model:</a><ul>
<li class="chapter" data-level="3.5.1" data-path="survival-analysis.html"><a href="survival-analysis.html#cox-ph-model-for-dtime"><i class="fa fa-check"></i><b>3.5.1</b> Cox-PH model for <code>dtime</code></a></li>
<li class="chapter" data-level="3.5.2" data-path="survival-analysis.html"><a href="survival-analysis.html#cox-ph-model-for-rtime"><i class="fa fa-check"></i><b>3.5.2</b> Cox-PH model for <code>rtime</code></a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="survival-analysis.html"><a href="survival-analysis.html#summary"><i class="fa fa-check"></i><b>3.6</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="random-survival-forest.html"><a href="random-survival-forest.html"><i class="fa fa-check"></i><b>4</b> Random Survival Forest</a><ul>
<li class="chapter" data-level="4.1" data-path="random-survival-forest.html"><a href="random-survival-forest.html#dtime"><i class="fa fa-check"></i><b>4.1</b> <code>dtime</code></a></li>
<li class="chapter" data-level="4.2" data-path="random-survival-forest.html"><a href="random-survival-forest.html#rtime"><i class="fa fa-check"></i><b>4.2</b> <code>rtime</code></a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>5</b> Conclusion</a><ul>
<li class="chapter" data-level="5.1" data-path="conclusion.html"><a href="conclusion.html#limitation"><i class="fa fa-check"></i><b>5.1</b> Limitation</a></li>
<li class="chapter" data-level="5.2" data-path="conclusion.html"><a href="conclusion.html#reference"><i class="fa fa-check"></i><b>5.2</b> Reference</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Rotterdam</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-exploration" class="section level1">
<h1><span class="header-section-number">Chapter2</span> Data Exploration</h1>
<div id="loading-data" class="section level2">
<h2><span class="header-section-number">2.1</span> Loading Data</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">data</span>(rotterdam)</a></code></pre></div>
<p>The data that we are going to use is called <code>rotterdam</code>, and it is a dataset that’s pre-recorded in the survival package. According to the documentation of the package, the data are retrieved from the Rotterdam tumor bank, which include various anonymous information of 2982 breast cancer patients. Below is a table of the variables in the dataset:</p>
<table>
<thead>
<tr class="header">
<th>Variable name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>pid</code></td>
<td>patient identifier</td>
</tr>
<tr class="even">
<td><code>year</code></td>
<td>year of cancer incidence</td>
</tr>
<tr class="odd">
<td><code>age</code></td>
<td>age</td>
</tr>
<tr class="even">
<td><code>meno</code></td>
<td>menopausal status (0= premenopausal, 1= postmenopausal)</td>
</tr>
<tr class="odd">
<td><code>size</code></td>
<td>tumor size, a factor with levels <code>&lt;=20</code>, <code>20-50</code>, <code>&gt;50</code></td>
</tr>
<tr class="even">
<td><code>grade</code></td>
<td>tumor grade</td>
</tr>
<tr class="odd">
<td><code>nodes</code></td>
<td>number of positive lymph nodes</td>
</tr>
<tr class="even">
<td><code>pgr</code></td>
<td>progesterone receptors (fmol/l)</td>
</tr>
<tr class="odd">
<td><code>er</code></td>
<td>estrogen receptors (fmol/l)</td>
</tr>
<tr class="even">
<td><code>hormon</code></td>
<td>hormonal treatment (0=no, 1=yes)</td>
</tr>
<tr class="odd">
<td><code>chemo</code></td>
<td>chemotherapy</td>
</tr>
<tr class="even">
<td><code>rtime</code></td>
<td>days to recurrence or last follow-up</td>
</tr>
<tr class="odd">
<td><code>recur</code></td>
<td>0= no recurrence, 1= recurrence</td>
</tr>
<tr class="even">
<td><code>dtime</code></td>
<td>days to death or last follow-up</td>
</tr>
<tr class="odd">
<td><code>death</code></td>
<td>0= alive, 1= dead</td>
</tr>
</tbody>
</table>
<p>From the description above, we see that there are <code>size</code> standing for the size of the tumor, <code>nodes</code> standing for how many lymph nodes are test cancer positive, and <code>grade</code> standing for an metric of metastasis, so we have all three criterions suggested in the background info.</p>
</div>
<div id="data-wrangling" class="section level2">
<h2><span class="header-section-number">2.2</span> Data Wrangling</h2>
<div id="ttumornnodemmetastasis" class="section level3">
<h3><span class="header-section-number">2.2.1</span> T(Tumor)N(Node)M(Metastasis)</h3>
<div id="size-for-ttumor" class="section level5">
<h5><span class="header-section-number">2.2.1.0.1</span> <code>size</code> for T(Tumor):</h5>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">rotterdam <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb2-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(size) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-3" title="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">number =</span> <span class="kw">n</span>(), <span class="dt">.groups =</span> <span class="st">&#39;drop&#39;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 3 x 2
##   size  number
##   &lt;fct&gt;  &lt;int&gt;
## 1 &lt;=20    1387
## 2 20-50   1291
## 3 &gt;50      304</code></pre>
<p>We can see that most of the patients in the database have tumor size smaller than 50mm.</p>
</div>
<div id="nodes-for-nnode" class="section level5">
<h5><span class="header-section-number">2.2.1.0.2</span> <code>nodes</code> for N(Node):</h5>
<p>The number of lymph nodes tested positive is another important measure in the TNM system.</p>
<p>For visualization purpose, we will make a new categorical variable called <code>Nodes_level</code>. For lymph nodes tested positive, the usual medical way of classifying the severity would be:<code>N0</code> for no positive nodes; <code>N1</code> for 1-3 positive nodes; <code>N2</code> for 4-9 positive nodes; and <code>N3</code> for more than 10 nodes. We will follow this classification method.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1">rotterdam &lt;-<span class="st"> </span>rotterdam <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Nodes_level =</span> <span class="kw">ifelse</span>(nodes <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="st">&quot;N0&quot;</span>, </a>
<a class="sourceLine" id="cb4-3" title="3">                       <span class="kw">ifelse</span>(nodes <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>nodes <span class="op">&lt;=</span><span class="st"> </span><span class="dv">3</span>, <span class="st">&quot;N1&quot;</span>, </a>
<a class="sourceLine" id="cb4-4" title="4">                       <span class="kw">ifelse</span>(nodes <span class="op">&gt;=</span><span class="st"> </span><span class="dv">4</span> <span class="op">&amp;</span><span class="st"> </span>nodes <span class="op">&lt;=</span><span class="st"> </span><span class="dv">9</span>, <span class="st">&quot;N2&quot;</span>, </a>
<a class="sourceLine" id="cb4-5" title="5">                       <span class="kw">ifelse</span>(nodes <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>, <span class="st">&quot;N3&quot;</span>, <span class="ot">NaN</span>)))))</a>
<a class="sourceLine" id="cb4-6" title="6">rotterdam <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb4-7" title="7"><span class="st">  </span><span class="kw">group_by</span>(Nodes_level) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb4-8" title="8"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">number =</span> <span class="kw">n</span>(), <span class="dt">.groups =</span> <span class="st">&#39;drop&#39;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 4 x 2
##   Nodes_level number
##   &lt;chr&gt;        &lt;int&gt;
## 1 N0            1436
## 2 N1             764
## 3 N2             515
## 4 N3             267</code></pre>
</div>
<div id="grade-for-mmetastasis" class="section level5">
<h5><span class="header-section-number">2.2.1.0.3</span> <code>grade</code> for M(Metastasis):</h5>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" title="1">rotterdam &lt;-<span class="st"> </span>rotterdam <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb6-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">grade =</span> <span class="kw">as.factor</span>(grade))</a></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1">rotterdam <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb7-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(grade) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">number =</span> <span class="kw">n</span>(), <span class="dt">.groups =</span> <span class="st">&#39;drop&#39;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   grade number
##   &lt;fct&gt;  &lt;int&gt;
## 1 2        794
## 2 3       2188</code></pre>
<p>In our dataset, we could see that all of the breast cancer patients are in grade II or grade III, which means that the cancer cells may start shifting to other parts of their body.</p>
</div>
</div>
<div id="treatment" class="section level3">
<h3><span class="header-section-number">2.2.2</span> Treatment</h3>
<p>As we were examining through the data, we found that upon the <code>chemo</code> variable and the <code>hormon</code> variable, there are instances where patients gets both therapy or neither. So in order to explore the relationship between treatment and survival, we introduce a new variable called <code>Treatment</code>, using the <code>chemo</code> and <code>hormon</code> variables.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1">rotterdam &lt;-<span class="st"> </span>rotterdam <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb9-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Treatment =</span> <span class="kw">ifelse</span>(chemo <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>hormon <span class="op">==</span><span class="st"> </span><span class="dv">0</span>, <span class="st">&quot;Chemo&quot;</span>,</a>
<a class="sourceLine" id="cb9-3" title="3">                     <span class="kw">ifelse</span>(chemo <span class="op">==</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>hormon <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;Hormon&quot;</span>, </a>
<a class="sourceLine" id="cb9-4" title="4">                     <span class="kw">ifelse</span>(chemo <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>hormon <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, <span class="st">&quot;Both&quot;</span>, <span class="st">&quot;NaN/Other Treatment&quot;</span>)))) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb9-5" title="5"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Treatment =</span> <span class="kw">as.factor</span>(Treatment))</a></code></pre></div>
<p>Note that in this manner as we try to ‘merge’ two binary variables into one variable with four levels, we are assuming interaction between <code>chemo</code> and <code>hormon</code>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1">rotterdam_recur &lt;-<span class="st"> </span>rotterdam <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-2" title="2"><span class="st">  </span><span class="kw">filter</span>(recur <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb10-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">drecurtime =</span> dtime<span class="op">-</span>rtime)</a>
<a class="sourceLine" id="cb10-4" title="4"><span class="kw">nrow</span>(rotterdam_recur)</a></code></pre></div>
<pre><code>## [1] 1518</code></pre>
<p>We also thought it would be of interest to invesigate how recurrnce of tumor might affect the survival of the patient. We made a new dataset called <code>rotterdam_recur</code>, which only include patients with <code>recur</code> = 1. Now the dataset contains 1518 data points, a little over the original <code>rotterdam</code> dataset. We will label the time from recurrence to death as <code>drecurtime</code> in the new data frame.</p>
</div>
</div>
<div id="data-visualizations-and-exploration" class="section level2">
<h2><span class="header-section-number">2.3</span> Data visualizations and exploration</h2>
<div id="diagnostics-vs.-survival-times" class="section level3">
<h3><span class="header-section-number">2.3.1</span> Diagnostics vs. Survival Times</h3>
<p>It is commonly considered that the earlier the breast cancer is detected and the earlier it is treated, the longer survival a patient might enjoy. Thus we think it is important to first look at the diagnostics before treatment and visualize their relationship with survival times.</p>
<p><code>size</code> vs. <code>dtime</code></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam, <span class="kw">aes</span>(<span class="dt">x =</span> size, <span class="dt">y =</span> dtime, <span class="dt">fill =</span> size)) <span class="op">+</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="st">  </span><span class="kw">geom_violin</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p><code>size</code> vs. <code>rtime</code></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam, <span class="kw">aes</span>(<span class="dt">x =</span> size, <span class="dt">y =</span> rtime, <span class="dt">fill =</span> size)) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="st">  </span><span class="kw">geom_violin</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-11-1.png" width="672" /></p>
<p><code>size</code> vs. <code>drecurtime</code></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam_recur, <span class="kw">aes</span>(<span class="dt">x =</span> size, <span class="dt">y =</span> drecurtime, <span class="dt">fill =</span> size)) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-2" title="2"><span class="st">  </span><span class="kw">geom_violin</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-12-1.png" width="672" /></p>
<p>As we can see from the three plots above, tumor size could be an important factor that affects patients’ survival time and recur time. For <code>size</code> smaller than 20, most of the patients are able to survive or encounter recurrence after roughly 3000 days. But for <code>size</code> 20-50 and &gt;50, it’s highly likely for cancer cells to recur in 500 days. However, after cancer cells have recurred, most patients could not survive over 2 years.</p>
<p><code>Nodes_level</code> vs. <code>dtime</code></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam, <span class="kw">aes</span>(<span class="dt">x =</span> Nodes_level, <span class="dt">y =</span> dtime, <span class="dt">fill =</span> Nodes_level)) <span class="op">+</span></a>
<a class="sourceLine" id="cb15-2" title="2"><span class="st">  </span><span class="kw">geom_violin</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p><code>Nodes_level</code> vs. <code>rtime</code></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam, <span class="kw">aes</span>(<span class="dt">x =</span> Nodes_level, <span class="dt">y =</span> rtime, <span class="dt">fill =</span> Nodes_level)) <span class="op">+</span></a>
<a class="sourceLine" id="cb16-2" title="2"><span class="st">  </span><span class="kw">geom_violin</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p><code>Nodes_level</code> vs. <code>drecurtime</code></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam_recur, <span class="kw">aes</span>(<span class="dt">x =</span> Nodes_level, <span class="dt">y =</span> drecurtime, <span class="dt">fill =</span> Nodes_level)) <span class="op">+</span></a>
<a class="sourceLine" id="cb17-2" title="2"><span class="st">  </span><span class="kw">geom_violin</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-15-1.png" width="672" /></p>
<p>Similarly, <code>nodes</code> is also a factor impacting the life of breast cancer patients. In fact, for patients with high <code>Nodes_level</code>, it is typically considered they are either having metastasis of the cancer or already experiencing a regional recurrence of the cancer. Thus, we could see that most patients with N2 or N3 <code>Nodes_level</code> experience recurrence shortly after treatment. However, after tumor has recurred, most patients could not survive over 2 years.</p>
<p><code>grade</code> vs. <code>dtime</code></p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam, <span class="kw">aes</span>(<span class="dt">x =</span> grade, <span class="dt">y =</span> dtime, <span class="dt">fill =</span> grade)) <span class="op">+</span></a>
<a class="sourceLine" id="cb18-2" title="2"><span class="st">  </span><span class="kw">geom_violin</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<p><code>grade</code> vs. <code>rtime</code></p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam, <span class="kw">aes</span>(<span class="dt">x =</span> grade, <span class="dt">y =</span> rtime, <span class="dt">fill =</span> grade)) <span class="op">+</span></a>
<a class="sourceLine" id="cb19-2" title="2"><span class="st">  </span><span class="kw">geom_violin</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<p><code>grade</code> vs. <code>drecurtime</code></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam_recur, <span class="kw">aes</span>(<span class="dt">x =</span> grade, <span class="dt">y =</span> drecurtime, <span class="dt">fill =</span> grade)) <span class="op">+</span></a>
<a class="sourceLine" id="cb20-2" title="2"><span class="st">  </span><span class="kw">geom_violin</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-18-1.png" width="672" /></p>
<p>We noticed that a larger proportion of patients in grade 3 survived &lt;2000 days than those in grade 2, and pretty much of patients in grade 3 suffer from recurrence of breast cancer in less than 1000 days.</p>
</div>
<div id="treatment-vs.-survival-times" class="section level3">
<h3><span class="header-section-number">2.3.2</span> Treatment vs. Survival Times</h3>
<p>Next we are also going to look at the effect of different types of treatments on the survival times of breast cancer patients.</p>
<p><code>Treatment</code> vs. <code>dtime</code></p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb21-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam, <span class="kw">aes</span>(<span class="dt">x =</span> Treatment, <span class="dt">y =</span> dtime, <span class="dt">fill =</span> Treatment)) <span class="op">+</span></a>
<a class="sourceLine" id="cb21-2" title="2"><span class="st">  </span><span class="kw">geom_violin</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p><code>Treatment</code> vs. <code>rtime</code></p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam, <span class="kw">aes</span>(<span class="dt">x =</span> Treatment, <span class="dt">y =</span> rtime, <span class="dt">fill =</span> Treatment)) <span class="op">+</span></a>
<a class="sourceLine" id="cb22-2" title="2"><span class="st">  </span><span class="kw">geom_violin</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p><code>Treatment</code> vs. <code>drecurtime</code></p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb23-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam_recur, <span class="kw">aes</span>(<span class="dt">x =</span> Treatment, <span class="dt">y =</span> drecurtime, <span class="dt">fill =</span> Treatment)) <span class="op">+</span></a>
<a class="sourceLine" id="cb23-2" title="2"><span class="st">  </span><span class="kw">geom_violin</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<p>By examing the three plots above, it seems that <code>Treatment</code> would not affect patients’ survival time or recurrence that much. We can find that <code>chemo + hormon</code> is likely to be the one with best curative effect, that patients receiving both chemo and hormon therapy tend to have longer survival time and longer time to recurrence. And the effect of hormon therapy itself seems not that satisfying. However, after tumor have recurred, most patients do not live up to 2 years.</p>
<p>We also found a bi-model shape in <code>NaN/Other Traetment</code> group in <code>rtime</code> vs. <code>Treatment</code>. This may because the two peaks correponds to no treatment and other treatment separately, but currently we don’t have more information investigating the true reason.</p>
</div>
<div id="age-treatment-vs.-survival-times" class="section level3">
<h3><span class="header-section-number">2.3.3</span> <code>age</code> + <code>Treatment</code> vs. Survival Times</h3>
<p><code>age</code> + <code>Treatment</code> vs. <code>dtime</code></p>
<p>As we were visualizing for <code>Treatment</code> vs. <code>dtime</code>, we found that Hormontherapy generally has a weaker effect than Chemotherapy, but we think there might be some confounding variables that leads to such conclusion. One that we discovered is <code>age</code>:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam, <span class="kw">aes</span>(<span class="dt">x =</span> age, <span class="dt">y =</span> dtime, <span class="dt">color =</span> Treatment)) <span class="op">+</span></a>
<a class="sourceLine" id="cb24-2" title="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<p><code>age</code> + <code>Treatment</code> vs. <code>rtime</code></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam, <span class="kw">aes</span>(<span class="dt">x =</span> age, <span class="dt">y =</span> rtime, <span class="dt">color =</span> Treatment)) <span class="op">+</span></a>
<a class="sourceLine" id="cb25-2" title="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-23-1.png" width="672" /></p>
<p>It might be difficult to see from the plots right now, so we decided to make a partial plot of the full plot by filtering the patients who did not take either treatment out.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1">rotterdam_new &lt;-rotterdam <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb26-2" title="2"><span class="st">  </span><span class="kw">filter</span>(Treatment <span class="op">!=</span><span class="st"> &quot;NaN/Other Treatment&quot;</span>) </a></code></pre></div>
<p><code>age</code> + <code>Treatment</code> vs. <code>dtime</code></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb27-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam_new, <span class="kw">aes</span>(<span class="dt">x =</span> age, <span class="dt">y =</span> dtime, <span class="dt">color =</span> Treatment)) <span class="op">+</span></a>
<a class="sourceLine" id="cb27-2" title="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<p><code>age</code> + <code>Treatment</code> vs. <code>rtime</code></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam_new, <span class="kw">aes</span>(<span class="dt">x =</span> age, <span class="dt">y =</span> rtime, <span class="dt">color =</span> Treatment)) <span class="op">+</span></a>
<a class="sourceLine" id="cb28-2" title="2"><span class="st">  </span><span class="kw">geom_point</span>(<span class="dt">alpha =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<p>From the two plots above we could see that the patients who took either chemo therapy or hormon therapy are clearly clusterd. For the group who only took chemotherapy, most patients’ <code>age</code> are located below 50 years old. For the group who only took hormontherapy, most patients’ age are located above 50 years old. This is because chemotherapy might have more negative effects for patients at larger age than hormontherapy and thus would effect survival if the wrong therapy is given. Generally, hormontherapy is more friendly to elder people but chemotherapy has better effect.</p>
</div>
<div id="treatment-vs.-tnm" class="section level3">
<h3><span class="header-section-number">2.3.4</span> <code>Treatment</code> vs. TNM</h3>
<p><code>Treatment</code> vs. <code>size</code></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam, <span class="kw">aes</span>(<span class="dt">x =</span> Treatment, <span class="dt">fill =</span> size)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb29-2" title="2"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;fill&quot;</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<p>We are also interested to see if there are any other factors that would affect a patient’s decision on the treatment he/she takes other than his/her age. We thought we could stick with the TNM system and we started with tumor size. Generally, there is no obvious distinction in the treatment taken among different sizes of tumor as we can see from the plot above.</p>
<p><code>Treatment</code> vs. <code>Nodes_level</code></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam, <span class="kw">aes</span>(<span class="dt">x =</span> Treatment, <span class="dt">fill =</span> Nodes_level)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb30-2" title="2"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;fill&quot;</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p>This time we are checking if there are difference in <code>Treatment</code> with respect to different positive lymph node levels. Now we are onto something interesting. We can see that none of the <code>N0</code> patients in our dataset have taken either chemotherapy or hormontherapy. we think that it is possible that chemotherapy and hormontherapy are for severer patients and they might just be “overkill” for mild patients.</p>
<p><code>Treatment</code> vs. <code>grade</code></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" title="1"><span class="kw">ggplot</span>(<span class="dt">data =</span> rotterdam, <span class="kw">aes</span>(<span class="dt">x =</span> Treatment, <span class="dt">fill =</span> grade)) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb31-2" title="2"><span class="st">  </span><span class="kw">geom_bar</span>(<span class="dt">position =</span> <span class="st">&quot;fill&quot;</span>)</a></code></pre></div>
<p><img src="Rotterdam_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<p>From the above we can see that for grade 2 and grade 3 breast cancer, there’s not too much difference in the treatment a patient takes.</p>
</div>
<div id="general-x-year-survival-rate" class="section level3">
<h3><span class="header-section-number">2.3.5</span> General X-year Survival Rate</h3>
<p>A very important criterion in analysis about cancer is the 5-year survival rate. In order to examine that, we introduce a new variable called <code>5_year_survival</code>, which indicates 1 if a patients survival time is larger than 5 years and 0 vice versa.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1">rotterdam &lt;-<span class="st"> </span>rotterdam <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb32-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">dtime_Years =</span> <span class="kw">floor</span>(dtime<span class="op">/</span><span class="dv">365</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb32-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="st">`</span><span class="dt">5_year_survival</span><span class="st">`</span> =<span class="st"> </span><span class="kw">ifelse</span>(dtime_Years <span class="op">&gt;=</span><span class="st"> </span><span class="dv">5</span>, <span class="dv">1</span>, <span class="dv">0</span>))</a></code></pre></div>
<p>Now we want to calculate the 5-year survival rate for the population in the dataset.</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" title="1">rotterdam <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb33-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">5_year_survival</span><span class="st">`</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb33-3" title="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">number =</span> <span class="kw">n</span>(), <span class="dt">.groups =</span> <span class="st">&#39;drop&#39;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   `5_year_survival` number
##               &lt;dbl&gt;  &lt;int&gt;
## 1                 0    898
## 2                 1   2084</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" title="1"><span class="dv">2084</span><span class="op">/</span>(<span class="dv">898</span><span class="op">+</span><span class="dv">2084</span>)</a></code></pre></div>
<pre><code>## [1] 0.6988598</code></pre>
<p>And also the important 10-year survival rate.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" title="1">rotterdam &lt;-<span class="st"> </span>rotterdam <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb37-2" title="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">dtime_Years =</span> <span class="kw">floor</span>(dtime<span class="op">/</span><span class="dv">365</span>)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb37-3" title="3"><span class="st">  </span><span class="kw">mutate</span>(<span class="st">`</span><span class="dt">10_year_survival</span><span class="st">`</span> =<span class="st"> </span><span class="kw">ifelse</span>(dtime_Years <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>, <span class="dv">1</span>, <span class="dv">0</span>))</a></code></pre></div>
<p>Now we calculate the 10-year survival rate for the population in the dataset.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" title="1">rotterdam <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb38-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(<span class="st">`</span><span class="dt">10_year_survival</span><span class="st">`</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb38-3" title="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">number =</span> <span class="kw">n</span>(), <span class="dt">.groups =</span> <span class="st">&#39;drop&#39;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   `10_year_survival` number
##                &lt;dbl&gt;  &lt;int&gt;
## 1                  0   2297
## 2                  1    685</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" title="1"><span class="dv">685</span><span class="op">/</span>(<span class="dv">685</span> <span class="op">+</span><span class="st"> </span><span class="dv">2297</span>)</a></code></pre></div>
<pre><code>## [1] 0.2297116</code></pre>
<p>We can find that the 5-year survival rate for breast cancer is just fine, and around 70% of patients are able to live more than 5 years. However, the 10-year survival rate is still disappointing given the current medical level, and only around 20% patients could live more than 10 years after diagnosis.</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" title="1">rotterdam <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb42-2" title="2"><span class="st">  </span><span class="kw">group_by</span>(grade) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb42-3" title="3"><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">number =</span> <span class="kw">n</span>(), <span class="dt">.groups =</span> <span class="st">&#39;drop&#39;</span>)</a></code></pre></div>
<pre><code>## # A tibble: 2 x 2
##   grade number
##   &lt;fct&gt;  &lt;int&gt;
## 1 2        794
## 2 3       2188</code></pre>
<p>However, we have to notice that in our dataset, most patients are diagnosed with grade III breast cancer, which is pretty severe. This would give a more pessimistic calculation of 5-year/ 10-year survival rates of breast cancer patients as a whole. In fact, according to webMD.com, the overall 5-year relative survival rate for breast cancer is 90% and the 10-year breast cancer relative survival rate is 84%.</p>
<p>Thus the important point is that female with high risk of breast caner(family inheritance, bad life habits, etc.) should have regular physical examination, with proper screening for breast cancer. Even if diagnosed, do not panic and take treatment as soon as possible. In this way, a breast cancer patients might be able to enjoy longer survival.</p>
<p>Another important yet sad point is that after cancer has recurred, it does not matter what treatment a patient takes and most people do not live up to 2 years if recurred. Thus patients should be extremely careful not getting cancer recurred.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="survival-analysis.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Rotterdam.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
